<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ElDorado Marketplace</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    margin:0;
    font-family:'Segoe UI', sans-serif;
    background: linear-gradient(135deg,#0f1115,#1a1c25);
    color:#fff;
    min-height:100vh;
    padding:30px;
    position: relative;
}
h1{color:#00ff9c;text-align:center;margin-bottom:40px;}

/* Log Out Button */
#logoutBtn {
    position: absolute;
    top: 20px;
    right: 20px;
    padding: 10px 15px;
    border: none;
    border-radius: 12px;
    background: #ff4444;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
}
#logoutBtn:hover { opacity: 0.85; }

/* Product Grid */
.product-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:20px;
}
.product-card{
    background:#1c1e2a;
    border-radius:20px;
    padding:20px;
    text-align:center;
    box-shadow:0 0 20px #00ff9c;
}
.product-card h2{margin:10px 0;color:#00ff9c;}
.product-card p{margin:5px 0;color:#fff;}
.product-card button{
    padding:10px 15px;
    border:none;
    border-radius:10px;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s;
    margin-top:10px;
}
.buyBtn{background:#00c244;color:#fff;}
.buyBtn:hover{opacity:0.85;}
</style>
</head>
<body>

<h1>ElDorado Marketplace</h1>

<!-- Log Out Button -->
<button id="logoutBtn"></button>

<div class="product-grid" id="productGrid">
  <!-- Products added by JS -->
</div>

<script>
// ===== User Info =====
const username = localStorage.getItem("username") || "Guest";
const userEmail = localStorage.getItem("userEmail") || "";

// Set logout button text
const logoutBtn = document.getElementById("logoutBtn");
logoutBtn.textContent = `Logout (${username})`;
logoutBtn.addEventListener("click", () => {
    localStorage.removeItem("username");
    localStorage.removeItem("userEmail");
    localStorage.removeItem("userId");
    window.location.reload(); // Refresh page after logout
});

// ===== Sample Products =====
const products = [
  {name:"Eldorado Gem #1", price:"$10.00"},
  {name:"Eldorado Gem #2", price:"$15.00"},
  {name:"Eldorado Gem #3", price:"$20.00"},
];

const grid = document.getElementById("productGrid");

products.forEach(prod=>{
    const card = document.createElement("div");
    card.className="product-card";
    card.innerHTML = `
        <h2>${prod.name}</h2>
        <p>Price: ${prod.price}</p>
        <button class="buyBtn">Buy</button>
    `;
    grid.appendChild(card);

    const buyBtn = card.querySelector(".buyBtn");

    // Buy button
    buyBtn.addEventListener("click", ()=>{
        if(!username || username === "Guest"){
            window.location.href="signup.html";
        } else {
            const url = `purchase.html?name=${encodeURIComponent(prod.name)}&price=${encodeURIComponent(prod.price)}`;
            window.location.href=url;
        }
    });
});
</script>
</body>
</html>
