<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ElDorado Marketplace</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background: linear-gradient(135deg,#0f1115,#1a1c25);
    color:#fff;
    padding:20px;
}
header{
    display:flex;
    justify-content: space-between;
    align-items:center;
    margin-bottom:30px;
}
header h1{color:#00ff9c;}
header .user-panel button{
    background:#00ff9c;
    color:#000;
    border:none;
    padding:10px 15px;
    border-radius:10px;
    cursor:pointer;
    font-weight:bold;
}
.market{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
    gap:20px;
}
.product{
    background:#1c1e2a;
    padding:15px;
    border-radius:20px;
    text-align:center;
    transition:0.3s;
}
.product:hover{transform:scale(1.05);}
.product h2{color:#00ff9c;margin:10px 0;}
.product button{
    padding:10px 15px;
    border:none;
    border-radius:12px;
    background:#00c244;
    color:white;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s;
}
.product button:hover{opacity:0.85;}
</style>
</head>
<body>

<header>
<h1>ElDorado Marketplace</h1>
<div class="user-panel">
<span id="userNameDisplay"></span>
<button id="logoutBtn" style="display:none;">Logout</button>
</div>
</header>

<div class="market" id="marketplace">
<!-- Products will be inserted here -->
</div>

<script>
// ===== Login status =====
const username = localStorage.getItem("username");
if(username){
    document.getElementById("userNameDisplay").textContent = username;
    document.getElementById("logoutBtn").style.display = "inline-block";
}

document.getElementById("logoutBtn").addEventListener("click",()=>{
    localStorage.removeItem("username");
    localStorage.removeItem("userEmail");
    localStorage.removeItem("userId");
    window.location.reload();
});

// ===== Sample products =====
const products = [
    {name:"Gold Sword", price:"$50"},
    {name:"Silver Shield", price:"$30"},
    {name:"Magic Potion", price:"$15"},
    {name:"Eldorado Gem", price:"$100"}
];

const marketEl = document.getElementById("marketplace");
products.forEach(p=>{
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `<h2>${p.name}</h2><p>${p.price}</p><button>Buy</button>`;
    div.querySelector("button").addEventListener("click",()=>{
        if(!username){
            window.location.href = "login.html";
        } else {
            const urlName = encodeURIComponent(p.name);
            const urlPrice = encodeURIComponent(p.price);
            window.location.href = `purchase.html?name=${urlName}&price=${urlPrice}`;
        }
    });
    marketEl.appendChild(div);
});
</script>

</body>
</html>
